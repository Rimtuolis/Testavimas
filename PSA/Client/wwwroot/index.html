<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Robotu Dalys</title>
    <base href="/" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link href="css/app.css" rel="stylesheet" />
</head>

<body>
    <div id="app">Loading...</div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>
    <script src="_framework/blazor.webassembly.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/hammerjs"></script>
    <script>
        var GLOBAL = {};
        GLOBAL.DotNetReference = null;
        GLOBAL.SetDotnetReference = function (pDotNetReference) {
            GLOBAL.DotNetReference = pDotNetReference;
        };
        function tinderSwipe() {
            var card = document.querySelector('div.swipeCard');

            function swipe(el) {
                var hammertime = new Hammer(el);

                hammertime.on('pan', function (event) {
                    el.classList.add('moving');
                });

                hammertime.on('pan', function (event) {
                    if (event.deltaX === 0) return;
                    if (event.center.x === 0 && event.center.y === 0) return;

                    var xMulti = event.deltaX * 0.03;
                    var yMulti = event.deltaY / 80;
                    var rotate = xMulti * yMulti;

                    event.target.style.transform = 'translate(' + event.deltaX + 'px, ' + event.deltaY + 'px) rotate(' + rotate + 'deg)';
                });

                hammertime.on('panend', function (event) {
                    el.classList.remove('moving');

                    var moveOutWidth = document.body.clientWidth;
                    var keep = Math.abs(event.deltaX) < 80 || Math.abs(event.velocityX) < 0.5;

                    //event.target.classList.toggle('removed', !keep);
                    console.log("BYBYS0?")
                    if (keep) {
                        event.target.style.transform = '';
                    } else {
                        if (event.deltaX >= 80 || event.velocityX >= 0.5) {
                            GLOBAL.DotNetReference.invokeMethodAsync('Like');
                        } else {
                            GLOBAL.DotNetReference.invokeMethodAsync('Dislike');
                        }
                        
                        event.target.style.transform = 'translate(' + 0 + 'px, ' + 0 + 'px) rotate(' + 0 + 'deg)';
                    }
                });

            }
            swipe(card);
        }


       

    </script>


</body>
</html>